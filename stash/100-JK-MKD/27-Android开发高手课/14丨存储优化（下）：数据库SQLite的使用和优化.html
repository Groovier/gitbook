<!DOCTYPE html><html><head>
    <meta charset="utf-8"><meta name="keywords" content="极客时间,IT,职业教育,知识付费,二叉树,极客Live,极客搜索,互联网,前端开发,后端开发,编程语言,人工智能,区块链,技术大会,技术管理,产品,研发,测试,运维,数据库,架构,微服务,实战,技术专家,Java,iOS,Android,Linux,Go" id="metakeywords"><meta name="description" content="极客时间是一款由极客邦科技倾力打造的面向IT领域的知识服务产品,旨在帮助用户提升技术认知.板块包含专栏文章、视频课程、新闻、资讯、直播、图书、商城等。内容覆盖IT从业者的全生命周期知识技能图谱,邀请左耳朵耗子、王争、杨晓峰、winter,丁奇等顶级技术和行业专家为你讲述技术本质,解读科技动态." id="metadesc"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover"><meta name="format-detection" content="telephone=no"><title>极客时间 | Android开发高手课</title><style data-savepage-href="https://static001.geekbang.org/static/time/css/app.e30427d82748c1a9d53a048cf510f63c.css">html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#fa8919;border-radius:3px}.gkui-message-content-wrap .gkui-message-close .defaultClose:after,.gkui-message-content-wrap .gkui-message-close .defaultClose:before{transition:all .3s ease}.gkui-message-content-wrap{position:relative;text-align:center}.gkui-message-content-wrap .gkui-message-content{display:inline-block;overflow:hidden;padding:10px 16px;margin-bottom:6px;background:#fff;font-size:14px;line-height:14px;border-radius:3px;box-shadow:0 1px 6px rgba(0,0,0,.2);pointer-events:all}.gkui-message-content-wrap .gkui-message-loading-prefix{display:inline-block;margin-right:4px;transform:translateY(2px)}.gkui-message-content-wrap .gkui-message-close{display:inline-block;margin-left:4px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.gkui-message-content-wrap .gkui-message-close .defaultClose{display:inline-block;position:relative;width:10px;height:10px}.gkui-message-content-wrap .gkui-message-close .defaultClose:after,.gkui-message-content-wrap .gkui-message-close .defaultClose:before{position:absolute;top:5px;right:0;display:block;content:"";width:12px;height:1px;background:#8a8a8a}.gkui-message-content-wrap .gkui-message-close .defaultClose:before{transform:rotate(45deg)}.gkui-message-content-wrap .gkui-message-close .defaultClose:after{transform:rotate(-45deg)}.gkui-message-content-wrap .gkui-message-close .defaultClose:hover:after,.gkui-message-content-wrap .gkui-message-close .defaultClose:hover:before{background:#333}.fade-up-enter-active,.fade-up-leave-active{transition:all .4s ease}.fade-up-enter,.fade-up-leave-to{opacity:0;transform:translateY(-50%)}.fade-up-leave-to{height:0}.gkui-message-content-wrap .gkui-message-info{border:1px solid #ddd}.gkui-message-content-wrap .gkui-message-success{border:1px solid #666;background:#666;color:#fff}.gkui-message-content-wrap .gkui-message-error{border:1px solid rgba(0,0,0,.7);background-color:rgba(0,0,0,.7);color:#fff}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}.gkui--modal-block-scroll{position:absolute;overflow:hidden;width:100vw}#gkui-modal-controller{width:100%}#gkui-modal-controller,.gkui-modal-layer{position:fixed;left:0;top:0;z-index:90000}.gkui-modal-layer{right:0;bottom:0;background-color:rgba(55,55,55,.3)}.fade-enter-active,.fade-leave-active{transition:all .3s ease}.fade-enter,.fade-leave-to{opacity:0}.gkui-message-list[data-v-99cd8b4a]{position:fixed;top:0;left:0;width:100%;pointer-events:none}._2sRsF5RP_0{position:relative}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#fa8919}to{stroke:#fa8919}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><style type="text/css">.hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}</style><style type="text/css">._3ADRghFH_0{background:#000}._21xvFvr7_0{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._3O_7qs2p_0{opacity:0}._2q1SuvsS_0{opacity:1}._20-cXID6_0{max-width:46.25rem;min-height:100vh;margin:0 auto;background:#fff;-webkit-transition:background-color .3s ease;transition:background-color .3s ease}._20-cXID6_0 .PYIrCCrf_0{color:#888}._20-cXID6_0 ._1EUVUUrC_0,._20-cXID6_0 .PYIrCCrf_0{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}._20-cXID6_0 ._1EUVUUrC_0{color:#fff;background-color:#fa8919;font-weight:500}._20-cXID6_0 ._2QmGFWqF_0{padding-left:22px;padding-right:15px}._20-cXID6_0 ._3lTiSebX_0{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}._20-cXID6_0 ._3lTiSebX_0 ._7OuU9_xM_0{font-size:12px}._20-cXID6_0 ._50pDbNcP_0{padding-top:22px;padding-bottom:82px}._20-cXID6_0 .vJXgmLTi_0{color:#353535;font-weight:700;line-height:30px;font-size:22px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}._20-cXID6_0 ._2LbT9q3y_0{color:#888;font-size:13px;font-weight:400;margin-top:4px;margin-bottom:12px}._20-cXID6_0 ._2LbT9q3y_0 ._3FoXPaWx_0{margin-top:10px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden}._20-cXID6_0 ._2LbT9q3y_0 ._3FoXPaWx_0 .YLYfWxsg_0{color:#404040;font-size:15px;font-weight:400;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}._20-cXID6_0 ._2LbT9q3y_0 ._3FoXPaWx_0 .nJKayDbe_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:10px;height:23px;border-radius:23px;font-size:13px;font-weight:400;color:#fa8919;padding-left:10px;padding-right:6px;background:#fbf5ee;white-space:nowrap}._20-cXID6_0 ._2LbT9q3y_0 ._3FoXPaWx_0 .nJKayDbe_0 ._2k8p2GLU_0{margin-left:2px;font-size:12px;-webkit-transform:scale(.7);transform:scale(.7)}._20-cXID6_0 ._3Jbcj4Iu_0._3BZBHEhm_0 video-webkit-media-controls-fullscreen-button{display:none}._20-cXID6_0 ._1-ZfmNK8_0{border-radius:6px;vertical-align:top;margin-bottom:24px;width:100%}._20-cXID6_0 ._3IatBmhv_0{margin-top:0}._20-cXID6_0 ._22WJb59B_0{color:#b2b2b2;padding-bottom:20px;font-size:13px;font-weight:400}._20-cXID6_0 ._22WJb59B_0 ._3ODTLCec_0{font-size:15px}._20-cXID6_0 ._3c2GGLul_0{width:100%;margin:20px 0}._20-cXID6_0 ._3EKy7lL9_0{overflow:hidden;padding-top:10px;margin-bottom:-30px}._20-cXID6_0 ._3EKy7lL9_0 a._1EUVUUrC_0{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}._20-cXID6_0 ._1qhD3bdE_0{padding-top:32px;border-top:10px solid #f6f7fb;-webkit-transition:border-top .3s ease;transition:border-top .3s ease;position:relative}._20-cXID6_0 ._1qhD3bdE_0 h2{color:#404040;position:relative;z-index:1;margin-bottom:1rem;font-weight:700;font-size:19px}._20-cXID6_0 ._1qhD3bdE_0 ._2FC_cD1O_0{font-size:16px;margin-left:5px}._20-cXID6_0 ._2-nZIZjB_0{position:absolute;z-index:2;background:#fa8919;font-size:13px;color:#fff;text-align:center;height:28px;width:80px;line-height:28px;-webkit-box-shadow:4px 5px 20px 1px rgba(250,137,25,.24);box-shadow:4px 5px 20px 1px rgba(250,137,25,.24);border-radius:28px;right:22px;top:32px}._20-cXID6_0 .YGjSYR8B_0{z-index:10;cursor:pointer}._20-cXID6_0 ._2DmyW7ex_0{cursor:pointer;padding-top:24px;padding-bottom:24px;position:relative}._20-cXID6_0 ._2DmyW7ex_0:before{content:" ";height:.5px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:22px;right:22px}._20-cXID6_0 ._2DmyW7ex_0 ._1M5b-cvc_0{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}._20-cXID6_0 ._2DmyW7ex_0 ._1M5b-cvc_0 ._3l55W_ak_0{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}._20-cXID6_0 ._2DmyW7ex_0 ._1M5b-cvc_0 ._3Ov-zF0e_0{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}.ZphmEful_0{height:60px;background:transparent}._2zq_fmRg_0{font-size:15px;color:#888;line-height:24px;border-left:3px solid #e8e8e8;padding-left:15px}._3uTMOfKI_0,._24nFYvU9_0{-webkit-transition:all .3s ease;transition:all .3s ease}._3WwMT2EY_0 ._1uEolA82_0,._9b3gTd1B_0 ._2NnvkXgw_0{-webkit-transform:translateX(-508px);transform:translateX(-508px)}._3WwMT2EY_0 ._2NnvkXgw_0,._9b3gTd1B_0 ._1uEolA82_0{-webkit-transform:translateX(508px);transform:translateX(508px)}._3BZBHEhm_0 ._2LbT9q3y_0{font-weight:700}._3BZBHEhm_0 ._2DmyW7ex_0:before{height:1px}@media only screen and (max-width:769px){._15u7cU5H_0{display:none!important}}@media only screen and (min-width:740px){._3ADRghFH_0{background:#fff}}.g78dTtKm_0{background:#f6f0e0}.g78dTtKm_0 ._1qhD3bdE_0{border-top:10px solid #efe6cf}.g78dTtKm_0 ._2DmyW7ex_0:before{background:#e5d8b5}.g78dTtKm_0 ._2DmyW7ex_0 ._1M5b-cvc_0 ._3l55W_ak_0{background:#efe6cf}.g78dTtKm_0 ._3lTiSebX_0{background-color:#efe6cf}._3uMzBYfb_0{background:#353535}._3uMzBYfb_0 ._2LbT9q3y_0,._3uMzBYfb_0 .vJXgmLTi_0{color:silver}._3uMzBYfb_0 ._1qhD3bdE_0{border-top:10px solid #3e3e3e}._3uMzBYfb_0 ._2DmyW7ex_0:before{background:#4c4c4c}._3uMzBYfb_0 ._2DmyW7ex_0 ._1M5b-cvc_0 ._3l55W_ak_0{background:#3e3e3e;color:silver}._3uMzBYfb_0 ._1qhD3bdE_0 h2,._3uMzBYfb_0 ._2DmyW7ex_0 ._1M5b-cvc_0 ._3Ov-zF0e_0{color:silver}._3uMzBYfb_0 ._3lTiSebX_0{background-color:#3e3e3e}._25ls2Q2l_0{margin-bottom:24px}._4ikL8tnR_0{padding-top:40px!important}.gpDqvVI7_0{position:fixed;top:0;bottom:0;width:100%;z-index:-1}</style><style type="text/css">._352wsGxH_0{height:63px}.Wz6esVdU_0{width:100%;height:63px;background:#fff;position:fixed;top:0;left:0;z-index:20;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 13px;-webkit-box-shadow:0 2px 3px 0 hsla(0,0%,89%,.38);box-shadow:0 2px 3px 0 hsla(0,0%,89%,.38)}._28dOln0j_0{height:40px;width:110px;background-size:110px;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;cursor:pointer}._1k9ecCKw_0{width:30px;height:30px;padding-top:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:start;font-size:14px;color:#444;margin-left:10px;cursor:pointer}._1U_jCCZU_0{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}._3oCJiu8W_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 13px;background:#fbf5ee;border-radius:15px;height:30px}._7Xrmrbox_0,.gBs4U5qC_0,.JjI7sqpW_0{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;color:#fa8919;font-size:13px;font-weight:500;cursor:pointer}.JjI7sqpW_0{font-size:14px}._3lsV2-l9_0{height:13px;width:1px;background:#fa8919;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:10px;margin-right:10px}._1UaW_Eq1_0{position:fixed;top:0;bottom:0;left:0;right:0;z-index:21;background:#fff;-webkit-transform:translateY(-20px);transform:translateY(-20px);opacity:0;visibility:hidden;-webkit-transition:all .3s ease;transition:all .3s ease}._1UaW_Eq1_0._2mIjHHvm_0{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;visibility:visible}._1qHJ5OLn_0{height:63px;-ms-flex-align:center;padding-left:15px;padding-right:15px;-webkit-box-shadow:0 2px 3px 0 hsla(0,0%,89%,.38);box-shadow:0 2px 3px 0 hsla(0,0%,89%,.38)}._1qHJ5OLn_0,._2FYmyQEJ_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;align-items:center}._2FYmyQEJ_0{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;height:35px;-ms-flex-align:center;border-radius:20px;padding-left:20px;padding-right:20px}._1CLulytQ_0{font-size:14px;color:#b2b2b2}._1reF0JJk_0{height:20px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;margin-left:10px}._1reF0JJk_0 input{background:transparent;border:0;color:#353535;height:20px;line-height:20px;font-size:14px;width:100%;vertical-align:top;outline:none}._33xQ4nNG_0{font-size:16px;font-weight:400;color:#b2b2b2;height:30px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;margin-left:20px}._1y_WRr3L_0{font-size:18px}._1y_WRr3L_0 ._2HnUZhdg_0{color:#888;font-weight:400;padding-left:28px;height:63px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #eee}._1y_WRr3L_0 ._2HnUZhdg_0._1r7t-t9P_0{color:#fa8919}._3IeMxVb7_0{position:absolute;bottom:40px;left:0;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}._3IeMxVb7_0 ._2HnUZhdg_0{position:relative;padding-top:46px;color:#888}._3IeMxVb7_0 ._339_Pvt6_0{position:absolute;color:#c3c3c3;height:46px;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:36px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;top:0;left:0}</style><style type="text/css">._2SACi4xg_0{line-height:0}._2SACi4xg_0 img{vertical-align:top;margin-left:20px;opacity:.5}</style><style type="text/css">._1Bg5E78Y_0{width:100%;height:60px;background:#fff;-webkit-transition:background-color .3s ease;transition:background-color .3s ease;-webkit-box-sizing:border-box;box-sizing:border-box;padding-left:18px;padding-right:12px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;border-radius:6px 30px 30px 6px;-webkit-box-shadow:0 3px 25px 4px rgba(140,163,191,.14);box-shadow:0 3px 25px 4px rgba(140,163,191,.14)}._1Bg5E78Y_0 ._2Ha38TVL_0{border-radius:50%;width:40px;height:40px;-webkit-box-shadow:0 1px 3px 2px rgba(0,0,0,.1);box-shadow:0 1px 3px 2px rgba(0,0,0,.1);position:relative}._1Bg5E78Y_0 ._1iA2uC1V_0{background-repeat:no-repeat;background-position:0 0;background-size:300px;background-color:#fff;border-radius:50%;width:40px;height:40px;position:absolute;top:0;left:0}._1Bg5E78Y_0 ._1WF5YSBJ_0{background:rgba(0,0,0,.15)}._1Bg5E78Y_0 ._2Kms_g0F_0{width:40px;height:40px;line-height:40px;text-align:center;border-radius:50%;z-index:2;position:relative}._1Bg5E78Y_0 .MH1rcCm7_0 ._2Kms_g0F_0{color:#fff;margin-left:2px}._1Bg5E78Y_0 ._1KuRDTHn_0 ._2Kms_g0F_0{color:#fff}._1Bg5E78Y_0 .MH1rcCm7_0 ._1iA2uC1V_0{-webkit-animation:HvzpPu2i_0 4s linear infinite;animation:HvzpPu2i_0 4s linear infinite;-webkit-animation-play-state:paused;animation-play-state:paused}._1Bg5E78Y_0 ._1KuRDTHn_0 ._1iA2uC1V_0{-webkit-animation:HvzpPu2i_0 4s linear infinite;animation:HvzpPu2i_0 4s linear infinite;-webkit-animation-play-state:running;animation-play-state:running}._1Bg5E78Y_0 ._1qj_iPD7_0{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;overflow:hidden;margin-right:10px}._1Bg5E78Y_0 ._1qj_iPD7_0 h3{color:#404040;font-size:15.25px;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}._1Bg5E78Y_0 ._1qj_iPD7_0 p{margin:0;margin-top:.125rem;font-size:12px;font-weight:500;line-height:1rem;color:#999}._1Bg5E78Y_0 ._3PhVtlEa_0{width:20px;height:20px;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;position:relative;color:#999;font-size:18px;line-height:20px;text-align:center;margin-right:20px}._1Bg5E78Y_0 ._1l6e3976_0{width:10px;height:10px;line-height:10px;text-align:center;position:absolute;bottom:-3px;right:-5px;color:#6c0;background:#fff;font-size:10px;-webkit-transition:background-color .2s ease;transition:background-color .2s ease}._1W0qSnju_0{-webkit-box-shadow:0 3px 25px 4px hsla(42,28%,65%,.14);box-shadow:0 3px 25px 4px hsla(42,28%,65%,.14)}._1W0qSnju_0,._1W0qSnju_0 ._1l6e3976_0{background:#f6f0e0}._1W0qSnju_0 ._2Ha38TVL_0{-webkit-box-shadow:0 1px 2px 2px hsla(42,28%,65%,.14);box-shadow:0 1px 2px 2px hsla(42,28%,65%,.14)}._2SRR-E_O_0{background:#4d4d4d;-webkit-box-shadow:none;box-shadow:none}._2SRR-E_O_0 ._3PhVtlEa_0{color:#fff}._2SRR-E_O_0 ._1l6e3976_0{background:#4d4d4d}._2SRR-E_O_0 ._1qj_iPD7_0 h3,._2SRR-E_O_0 ._1qj_iPD7_0 p{color:silver}._2vBNygJQ_0 ._1qj_iPD7_0 p{font-weight:700}@-webkit-keyframes HvzpPu2i_0{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes HvzpPu2i_0{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}</style><style type="text/css">._29HP61GA_0{font-weight:400;color:#353535;line-height:1.76;white-space:normal;word-break:normal;font-size:17px;-webkit-transition:background-color .3s ease;transition:background-color .3s ease}._29HP61GA_0 .MathJax_Display{overflow:auto}._29HP61GA_0 .poster{position:fixed;left:-10000px;top:-10000px;overflow:hidden;padding:1rem;background:#ececec}._29HP61GA_0 .richcontent-pre-copy{font-size:13px;color:#888;position:absolute;right:1em;top:.5em;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._29HP61GA_0 .richcontent-pre-copy .iconfont{font-size:12px;margin-right:.2em}._29HP61GA_0 a{color:#fa8919;border-bottom:1px solid #fa8919}._29HP61GA_0 img{display:block;max-width:100%;position:relative;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);background-color:#eee;vertical-align:top;border-radius:0}._29HP61GA_0 audio,._29HP61GA_0 video{width:100%;background-color:#eee}._29HP61GA_0 pre{margin-top:16px;padding:34px 0 0;margin-bottom:30px;position:relative;border-radius:6px;background:rgba(246,247,251,.749);border:0}._29HP61GA_0 pre code{font-size:12px;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;-webkit-box-sizing:border-box;box-sizing:border-box;margin-left:16px;margin-right:16px;overflow-x:scroll}._29HP61GA_0 pre code:after{content:"";height:30px;width:100%;display:block}._29HP61GA_0 hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}._29HP61GA_0 h1,._29HP61GA_0 h2,._29HP61GA_0 h3,._29HP61GA_0 h4,._29HP61GA_0 h5{margin-bottom:20px;margin-top:0;font-weight:700;color:#353535}._29HP61GA_0 b,._29HP61GA_0 strong{font-weight:700;color:#353535}._29HP61GA_0 h1{font-size:21px}._29HP61GA_0 h2{font-size:20px}._29HP61GA_0 h3{font-size:19px}._29HP61GA_0 h4{font-size:18px}._29HP61GA_0 h5{font-size:17px}._29HP61GA_0 center,._29HP61GA_0 p{font-weight:400;color:#353535;margin-top:0;margin-bottom:30px;word-break:break-word}._29HP61GA_0 center{text-align:center}._29HP61GA_0 blockquote{margin-top:0;margin-bottom:34px;border-left:3px solid #e8e8e8;padding-left:17px;color:#353535}._29HP61GA_0 blockquote p{margin-top:0;margin-bottom:0}._29HP61GA_0 ol,._29HP61GA_0 ul{margin-bottom:30px}._29HP61GA_0 ol p,._29HP61GA_0 ul p{margin-top:0;margin-bottom:0}._29HP61GA_0 ol{list-style:decimal;margin-left:20px}._29HP61GA_0 ul li{padding-left:17px;position:relative;margin-bottom:10px}._29HP61GA_0 ul li:after{content:"";height:6px;width:6px;border-radius:50%;background:#353535;position:absolute;top:10px;left:0}._29HP61GA_0 .orange{color:#fa8919}._29HP61GA_0 .reference{color:#888}._29HP61GA_0 .m-right{text-align:right}._29HP61GA_0 .m-center{text-align:center;display:block}._29HP61GA_0 .m-gray{color:#888}._29HP61GA_0 .m-small{font-size:15px}._29HP61GA_0 table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}._29HP61GA_0 table.hljs-ln,._29HP61GA_0 table.hljs-ln tbody,._29HP61GA_0 table.hljs-ln td,._29HP61GA_0 table.hljs-ln tr{-webkit-box-sizing:border-box;box-sizing:border-box}._29HP61GA_0 table.hljs-ln td{padding:0;border:0}._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers{min-width:15px;font-size:12px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._29HP61GA_0 table.hljs-ln td.hljs-ln-code,._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:20px;vertical-align:top}._29HP61GA_0 table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;font-size:13px;color:#666;word-wrap:normal;white-space:pre}._2gMcXXSK_0{font-size:15px}._2gMcXXSK_0 h1{font-size:19px}._2gMcXXSK_0 h2{font-size:18px}._2gMcXXSK_0 h3{font-size:17px}._2gMcXXSK_0 h4{font-size:16px}._2gMcXXSK_0 h5{font-size:15px}._2gMcXXSK_0 p{margin-bottom:26px}._2gMcXXSK_0 blockquote{margin-bottom:30px}._2gMcXXSK_0 ol,._2gMcXXSK_0 ul{margin-bottom:26px}._2gMcXXSK_0 .m-small{font-size:13px}._1-IhkAAb_0{font-size:19px}._1-IhkAAb_0 h1{font-size:23px}._1-IhkAAb_0 h2{font-size:22px}._1-IhkAAb_0 h3{font-size:21px}._1-IhkAAb_0 h4{font-size:20px}._1-IhkAAb_0 h5{font-size:19px}._1-IhkAAb_0 .m-small{font-size:17px}._1Xjr5LRK_0 table.hljs-ln td.hljs-ln-code,._1Xjr5LRK_0 table.hljs-ln td.hljs-ln-numbers{font-family:monospace}._1XhbM4Sp_0 pre{background:hsla(43,50%,87%,.749)}._1XhbM4Sp_0 blockquote{border-color:#efe6cf}._2wERfXHe_0 h1,._2wERfXHe_0 h2,._2wERfXHe_0 h3,._2wERfXHe_0 h4,._2wERfXHe_0 h5,._2wERfXHe_0 p{color:silver}._2wERfXHe_0 blockquote{border-color:#3e3e3e}._2wERfXHe_0 li,._2wERfXHe_0 strong{color:silver}._2wERfXHe_0 pre{background:rgba(62,62,62,.749)}._2wERfXHe_0 center{color:silver}._2wERfXHe_0 img{opacity:.9}._2wERfXHe_0 ul li:after{background:silver}._2wERfXHe_0 table.hljs-ln td.hljs-ln-numbers{color:#b2b2b2}._2wERfXHe_0 table.hljs-ln td.hljs-ln-code{color:silver}</style><style type="text/css">.reJj6Thl_0{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-top:40px}.reJj6Thl_0 a{border-bottom:none}.reJj6Thl_0 ._2273kGdT_0{width:35px;height:35px;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.reJj6Thl_0:last-child ._2CG0SquK_0{border-bottom:none}.reJj6Thl_0 ._2CG0SquK_0{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding-bottom:25px;border-bottom:.5px solid #e8e8e8;-webkit-transition:border-bottom .3s ease;transition:border-bottom .3s ease;overflow:hidden}.reJj6Thl_0 ._2CG0SquK_0 ._304R4gla_0{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding-bottom:10px}.reJj6Thl_0 ._2CG0SquK_0 ._3M6kV3zb_0{color:#4c4c4c;font-size:16px;font-weight:400;white-space:normal;word-break:normal;line-height:1.6;overflow:hidden;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical}.reJj6Thl_0 ._2CG0SquK_0 ._3D2NkqD6_0{overflow:auto;-webkit-line-clamp:unset}.reJj6Thl_0 ._2CG0SquK_0 ._1H1Z49Dr_0{color:#888;font-size:11px;line-height:1;margin-top:4px}.reJj6Thl_0 ._2CG0SquK_0 ._18Dng5rT_0{color:#353535;font-size:14px;font-weight:700;height:20px;line-height:20px}.reJj6Thl_0 ._1bkbsnjg_0{height:15px;line-height:15px;width:30px;overflow:hidden;font-size:10px;color:#fff;background:#cbcbcb;text-align:center;display:inline-block;border-radius:3px;vertical-align:top;margin-top:2px}.reJj6Thl_0 ._2eMTs2JE_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:26px}.reJj6Thl_0 ._1YQBH3WC_0{color:#999;font-size:13px;margin-left:42px;width:20px;text-align:center}.reJj6Thl_0 ._13n1j2Zp_0{color:#999;font-size:11px;width:20px;margin-left:38px;text-align:center}.reJj6Thl_0 ._2P4B1Hdm_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.reJj6Thl_0 ._2P4B1Hdm_0 i{color:#999;display:inline-block;font-size:15px;margin-right:4px;height:27px;width:15px;margin-top:-2px}.reJj6Thl_0 ._2P4B1Hdm_0 i._2A421P4G_0background-size:15px}.reJj6Thl_0 ._2P4B1Hdm_0 span{color:#888;font-size:13px;font-weight:400}.reJj6Thl_0 ._2P4B1Hdm_0 span._2A421P4G_0{color:#fa8919}.reJj6Thl_0 ._2r3UB1GX_0{font-size:13px;color:#b2b2b2;height:16px;padding-top:8px}.reJj6Thl_0 ._2r3UB1GX_0 span{font-weight:500}.reJj6Thl_0 ._2r3UB1GX_0 i,.reJj6Thl_0 ._2r3UB1GX_0 span{height:16px;line-height:16px;display:inline-block;vertical-align:top}.reJj6Thl_0 ._2xNIY4NG_0{margin-top:10px}.reJj6Thl_0 ._2xNIY4NG_0 ._33BLbmw4_0{color:#888;font-size:14px;font-weight:400;white-space:normal;word-break:normal;background:#f6f7fb;-webkit-transition:background .3s ease;transition:background .3s ease;border-radius:10px;padding:18px;overflow-x:scroll}.reJj6Thl_0 ._2xNIY4NG_0 ._1H1Z49Dr_0{color:#888;font-size:9px}._0X_LEcd_0 ._2xNIY4NG_0 ._33BLbmw4_0{background:#efe6cf}.cGm0Q9aA_0 ._2CG0SquK_0{border-bottom:1px solid #4c4c4c}.cGm0Q9aA_0 ._2CG0SquK_0 ._1H1Z49Dr_0,.cGm0Q9aA_0 ._2CG0SquK_0 ._3M6kV3zb_0,.cGm0Q9aA_0 ._2CG0SquK_0 ._18Dng5rT_0{color:silver}.cGm0Q9aA_0 ._2xNIY4NG_0 ._33BLbmw4_0{color:silver;background:#3e3e3e}.cGm0Q9aA_0 ._1YQBH3WC_0,.cGm0Q9aA_0 ._2P4B1Hdm_0 i,.cGm0Q9aA_0 ._2P4B1Hdm_0 span,.cGm0Q9aA_0 ._13n1j2Zp_0{color:#999}._2Gn7zqLg_0 ._1bkbsnjg_0{line-height:18px}</style>
    <script id="savepage-contentloaders" type="application/javascript">
      "use strict"
      savepage_ContentLoaders();
      function savepage_ContentLoaders()
      {
        var resourceMimeType = new Array();
        var resourceBase64Data = new Array();
        var resourceBlobUrl = new Array();
        window.addEventListener("DOMContentLoaded",
        function(event)
        {
          savepage_ShadowLoader(5);
          savepage_ResourceLoader(5);
          document.getElementById('savepage-contentloaders').remove();
        },false);
        function savepage_ShadowLoader(c){createShadowDOMs(0,document.documentElement);function createShadowDOMs(a,b){var i;if(b.localName=="iframe"||b.localName=="frame"){if(a<c){try{if(b.contentDocument.documentElement!=null){createShadowDOMs(a+1,b.contentDocument.documentElement)}}catch(e){}}}else{if(b.children.length>=1&&b.children[0].localName=="template"&&b.children[0].hasAttribute("data-savepage-shadowroot")){b.attachShadow({mode:"open"}).appendChild(b.children[0].content);b.removeChild(b.children[0]);for(i=0;i<b.shadowRoot.children.length;i++)if(b.shadowRoot.children[i]!=null)createShadowDOMs(a,b.shadowRoot.children[i])}for(i=0;i<b.children.length;i++)if(b.children[i]!=null)createShadowDOMs(a,b.children[i])}}}
        function savepage_ResourceLoader(f){createBlobURLs();replaceReferences(0,document.documentElement);function createBlobURLs(){var i,j,binaryString,blobData;var a=new Array();for(i=0;i<resourceMimeType.length;i++){if(typeof resourceMimeType[i]!="undefined"){binaryString=atob(resourceBase64Data[i]);resourceBase64Data[i]="";a.length=0;for(j=0;j<binaryString.length;j++){a[j]=binaryString.charCodeAt(j)}blobData=new Blob([new Uint8Array(a)],{type:resourceMimeType[i]});resourceMimeType[i]="";resourceBlobUrl[i]=window.URL.createObjectURL(blobData)}}}function replaceReferences(a,b){var i,regex1,regex2,csstext,blobData;regex1=/url\(\s*((?:"[^"]+")|(?:'[^']+')|(?:[^\s)]+))\s*\)/gi;regex2=/data:[^;]*;if(b.hasAttribute("style")){csstext=b.style.cssText;b.style.cssText=csstext.replace(regex1,replaceCSSRef)}if(b.localName=="style"){csstext=b.textContent;b.textContent=csstext.replace(regex1,replaceCSSRef)}else if(b.localName=="link"&&(b.rel.toLowerCase()=="icon"||b.rel.toLowerCase()=="shortcut icon")){if(b.href!="")b.href=b.href.replace(regex2,replaceRef)}else if(b.localName=="body"){if(b.background!="")b.background=b.background.replace(regex2,replaceRef)}else if(b.localName=="img"){if(b.src!="")b.src=b.src.replace(regex2,replaceRef)}else if(b.localName=="input"&&b.type.toLowerCase()=="image"){if(b.src!="")b.src=b.src.replace(regex2,replaceRef)}else if(b.localName=="audio"){if(b.src!=""){b.src=b.src.replace(regex2,replaceRef);b.load()}}else if(b.localName=="video"){if(b.src!=""){b.src=b.src.replace(regex2,replaceRef);b.load()}if(b.poster!="")b.poster=b.poster.replace(regex2,replaceRef)}else if(b.localName=="source"){if(b.src!=""){b.src=b.src.replace(regex2,replaceRef);b.parentElement.load()}}else if(b.localName=="track"){if(b.src!="")b.src=b.src.replace(regex2,replaceRef)}else if(b.localName=="object"){if(b.data!="")b.data=b.data.replace(regex2,replaceRef)}else if(b.localName=="embed"){if(b.src!="")b.src=b.src.replace(regex2,replaceRef)}if(b.localName=="iframe"||b.localName=="frame"){if(a<f){if(b.hasAttribute("data-savepage-sameorigin")){blobData=new Blob([decodeURIComponent(b.src.substr(29))],{type:"text/html;charset=utf-8"});b.onload=function(){try{if(b.contentDocument.documentElement!=null){replaceReferences(a+1,b.contentDocument.documentElement)}}catch(e){}};b.src=window.URL.createObjectURL(blobData)}}}else{if(b.shadowRoot!=null){for(i=0;i<b.shadowRoot.children.length;i++)if(b.shadowRoot.children[i]!=null)replaceReferences(a,b.shadowRoot.children[i])}for(i=0;i<b.children.length;i++)if(b.children[i]!=null)replaceReferences(a,b.children[i])}}function replaceCSSRef(a,b,c,d){var e=new Array();e=b.match(/data:[^;]*;resource=(\d+);base64,/i);if(e!=null)return"url("+resourceBlobUrl[+e[1]]+")";else return a}function replaceRef(a,b,c,d){return resourceBlobUrl[+b]}}
        
      }
    </script>
    
    <meta name="savepage-title" content="极客时间 | Android开发高手课">
    <meta name="savepage-date" content="Wed Jun 05 2019 12:17:47 GMT+0800 (中国标准时间)">
    <meta name="savepage-state" content="Standard Items; Used resource loader; Retained cross-origin frames; Removed unsaved URLs; Max frame depth = 5; Max resource size = 50MB; Max resource time = 10s;">
    <meta name="savepage-version" content="15.0">
    <meta name="savepage-comments" content="">
    <meta name="savepage-resourceloader" content=""></head><body><div id="app"><div class="_3ADRghFH_0" style="background-color: rgb(255, 255, 255);"><div class="gpDqvVI7_0" style="background-color: rgb(255, 255, 255);"></div> <div class="_20-cXID6_0" style="opacity: 1;"><div class="_3O_7qs2p_0 _2q1SuvsS_0"> <!----> <div class="_50pDbNcP_0"><h1 class="vJXgmLTi_0 _2QmGFWqF_0">
        14 | 存储优化（下）：数据库SQLite的使用和优化
      </h1> <div class="_2LbT9q3y_0 _2QmGFWqF_0"><span>2019-01-15</span> <span>张绍文</span> <div class="_3FoXPaWx_0"><span class="YLYfWxsg_0">Android开发高手课</span> <div class="nJKayDbe_0"><span>进入课程</span> <div class="_2k8p2GLU_0 iconfont"></div></div></div></div> <div class="_3Jbcj4Iu_0 _2QmGFWqF_0"><img src="https://static001.geekbang.org/resource/image/7f/34/7f2f70ea66cd61b7995d1eea3d2b6534.jpg"  class="_1-ZfmNK8_0"> <div class="_2SACi4xg_0"></div> <!----> <div class="_1Bg5E78Y_0 _25ls2Q2l_0"><div class="_1qj_iPD7_0"><h3>讲述：冯永吉</h3> <p><span style="margin-right: 3px;">时长</span><span style="margin-right: 10px;">15:49</span><span style="margin-right: 3px;">大小</span><span>14.50M</span></p></div> <!----> <div class="_2Ha38TVL_0 MH1rcCm7_0"> <div class="_1iA2uC1V_0 _1WF5YSBJ_0"></div> <div class="iconfont _2Kms_g0F_0"></div></div> <audio title="14 | 存储优化（下）：数据库SQLite的使用和优化" src="https://res001.geekbang.org/media/audio/3f/20/3f2516d097c71a3e435e0967ecb40220/ld/ld.m3u8" ></audio></div> <div class="_3IatBmhv_0"><div class="_29HP61GA_0"><p>我们先来复习一下前面讲到的存储方法的使用场景：少量的 Key Value 数据可以直接使用 SharedPreferences，稍微复杂一些的数据类型也可以通过序列化成 JSON 或者 Protocol Buffers 保存，并且在开发中获取或者修改数据也很简单。</p><p>不过这几种方法可以覆盖所有的存储场景吗？数据量在几百上千条这个量级时它们的性能还可以接受，但如果是几万条的微信聊天记录呢？而且如何实现快速地对某几个联系人的数据做增删改查呢？</p><p>对于大数据的存储场景，我们需要考虑稳定性、性能和<strong>可扩展性</strong>，这个时候就要轮到今天的“主角”数据库登场了。讲存储优化一定绕不开数据库，而数据库这个主题又非常大，我也知道不少同学学数据库的过程是从入门到放弃。那么考虑到我们大多是从事移动开发的工作，今天我就来讲讲移动端数据库 SQLite 的使用和优化。</p><h2>SQLite 的那些事儿</h2><p>虽然市面上有很多的数据库，但受限于库体积和存储空间，适合移动端使用的还真不多。当然使用最广泛的还是我们今天的主角 SQLite，但同样还是有一些其他不错的选择，例如创业团队的<a href="https://github.com/realm/realm-java">Realm</a>、Google 的<a href="https://github.com/google/leveldb">LevelDB</a>等。</p><p>在国内那么多的移动团队中，微信对 SQLite 的研究可以算是最深入的。这其实是业务诉求导向的，用户聊天记录只会在本地保存，一旦出现数据损坏或者丢失，对用户来说都是不可挽回的。另一方面，微信有很大一批的重度用户，他们有几千个联系人、几千个群聊天，曾经做过一个统计，有几百万用户的数据库竟然大于 1GB。对于这批用户，如何保证他们可以正常地使用微信是一个非常大的挑战。</p><!-- [[[read_end]]] --><p>所以当时微信专门开展了一个重度用户优化的专项。一开始的时候我们集中在 SQLite 使用上的优化，例如表结构、索引等。但很快就发现由于系统版本的不同，SQLite 的实现也有所差异，经常会出现一些兼容性问题，并且也考虑到加密的诉求，我们决定单独引入自己的 SQLite 版本。</p><p>“源码在手，天下我有”，从此开启了一条研究数据库的“不归路”。那时我们投入了几个人专门去深入研究 SQLite 的源码，从 SQLite 的 PRAGMA 编译选项、<a href="https://mp.weixin.qq.com/s?__biz=MzAwNDY1ODY2OQ==&mid=2649286603&idx=1&sn=d243dd27f2c6614631241cd00570e853&chksm=8334c349b4434a5fd81809d656bfad6072f075d098cb5663a85823e94fc2363edd28758ab882&mpshare=1&scene=1&srcid=0609GLAeaGGmI4zCHTc2U9ZX#rd">Cursor 实现优化</a>，到 SQLite 源码的优化，最后打造出从实验室到线上的整个监控体系。</p><p>在 2017 年，我们开源了内部使用的 SQLite 数据库<a href="https://github.com/Tencent/wcdb/wiki">WCDB</a>。这里多说两句，看一个开源项目是否靠谱，就看这个项目对产品本身有多重要。微信开源坚持内部与外部使用同一个版本，虽然我现在已经离开了微信团队，但还是欢迎有需要的同学使用 WCDB。</p><p>在开始学习前我要提醒你，SQLite 的优化同样也很难通过一两篇文章就把每个细节都讲清楚。今天的内容我选择了一些比较重要的知识点，并且为你准备了大量的参考资料，遇到陌生或者不懂的地方需要结合参考资料反复学习。</p><p><strong>1. ORM</strong></p><p>坦白说可能很多 BAT 的高级开发工程师都不完全了解 SQLite 的内部机制，也不能正确地写出高效的 SQL 语句。大部分应用为了提高开发效率，会引入 ORM 框架。ORM（Object Relational Mapping）也就是对象关系映射，用面向对象的概念把数据库中表和对象关联起来，可以让我们不用关心数据库底层的实现。</p><p>Android 中最常用的 ORM 框架有开源<a href="https://github.com/greenrobot/greenDAO">greenDAO</a>和 Google 官方的<a href="https://developer.android.com/training/data-storage/room/">Room</a>，那使用 ORM 框架会带来什么问题呢？</p><p>使用 ORM 框架真的非常简单，但是简易性是需要牺牲部分执行效率为代价的，具体的损耗跟 ORM 框架写得好不好很有关系。但可能更大的问题是让很多的开发者的思维固化，最后可能连简单的 SQL 语句都不会写了。</p><p>那我们的应用是否应该引入 ORM 框架呢？可能程序员天生追求偷懒，为了提高开发效率，应用的确应该引入 ORM 框架。<strong>但是这不能是我们可以不去学习数据库基础知识的理由，只有理解底层的一些机制，我们才能更加得心应手地解决疑难的问题</strong>。</p><p>考虑到可以更好的与 Android Jetpack 的组件互动，<a href="https://github.com/Tencent/wcdb/wiki/Android-WCDB-%E4%BD%BF%E7%94%A8-Room-ORM-%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A">WCDB 选择 Room 作为 ORM 框架</a>。</p><p><strong>2. 进程与线程并发</strong></p><p>如果我们在项目中有使用 SQLite，那么下面这个<a href="https://developer.android.com/reference/android/database/sqlite/SQLiteDatabaseLockedException">SQLiteDatabaseLockedException</a>就是经常会出现的一个问题。</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">android.database.sqlite.SQLiteDatabaseLockedException: database is locked</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">  at android.database.sqlite.SQLiteDatabase.dbopen</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">  at android.database.sqlite.SQLiteDatabase.openDatabase</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">  at android.database.sqlite.SQLiteDatabase.openDatabase</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p>SQLiteDatabaseLockedException 归根到底是因为并发导致，而 SQLite 的并发有两个维度，一个是多进程并发，一个是多线程并发。下面我们分别来讲一下它们的关键点。</p><p><strong>多进程并发</strong></p><p>SQLite 默认是支持多进程并发操作的，它通过文件锁来控制多进程的并发。SQLite 锁的粒度并没有非常细，它针对的是整个 DB 文件，内部有 5 个状态，具体你可以参考下面的文章。</p><ul>
<li>
<p>官方文档：<a href="https://www.sqlite.org/lockingv3.html">SQLite locking</a></p>
</li>
<li>
<p>SQLite 源码分析：<a href="http://huili.github.io/lockandimplement/machining.html">SQLite 锁机制简介</a></p>
</li>
<li>
<p><a href="https://www.cnblogs.com/cchust/p/4761814.html">SQLite 封锁机制</a></p>
</li>
</ul><p>简单来说，多进程可以同时获取 SHARED 锁来读取数据，但是只有一个进程可以获取 EXCLUSIVE 锁来写数据库。对于 iOS 来说可能没有多进程访问数据库的场景，可以把 locking_mode 的默认值改为 EXCLUSIVE。</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">PRAGMA locking_mode = EXCLUSIVE</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p>在 EXCLUSIVE 模式下，数据库连接在断开前都不会释放 SQLite 文件的锁，从而避免不必要的冲突，提高数据库访问的速度。</p><p><strong>多线程并发</strong></p><p>相比多进程，多线程的数据库访问可能会更加常见。SQLite 支持多线程并发模式，需要开启下面的配置，当然系统 SQLite 会默认开启多线程<a href="https://sqlite.org/threadsafe.html">Multi-thread 模式</a>。</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">PRAGMA SQLITE_THREADSAFE = 2</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p><strong>跟多进程的锁机制一样，为了实现简单，SQLite 锁的粒度都是数据库文件级别，并没有实现表级甚至行级的锁</strong>。还有需要说明的是，<strong>同一个句柄同一时间只有一个线程在操作</strong>，这个时候我们需要打开连接池 Connection Pool。</p><p>如果使用 WCDB 在初始化的时候可以指定连接池的大小，在微信中我们设置的大小是 4。</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">public static SQLiteDatabase openDatabase (String path, </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    SQLiteDatabase.CursorFactory factory, </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    int flags, </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    DatabaseErrorHandler errorHandler, </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    int poolSize)</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p>跟多进程类似，多线程可以同时读取数据库数据，但是写数据库依然是互斥的。SQLite 提供了 Busy Retry 的方案，即发生阻塞时会触发 Busy Handler，此时可以让线程休眠一段时间后，重新尝试操作，你可以参考<a href="https://mp.weixin.qq.com/s/8FjDqPtXWWqOInsiV79Chg">《微信 iOS SQLite 源码优化实践》</a>这篇文章。</p><p>为了进一步提高并发性能，我们还可以打开<a href="https://www.sqlite.org/wal.html">WAL</a>（Write-Ahead Logging）模式。WAL 模式会将修改的数据单独写到一个 WAL 文件中，同时也会引入了 WAL 日志文件锁。通过 WAL 模式读和写可以完全地并发执行，不会互相阻塞。</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">PRAGMA schema.journal_mode = WAL</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p><strong>但是需要注意的是，写之间是仍然不能并发</strong>。如果出现多个写并发的情况，依然有可能会出现 SQLiteDatabaseLockedException。这个时候我们可以让应用中捕获这个异常，然后等待一段时间再重试。</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">} catch (SQLiteDatabaseLockedException e) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    if (sqliteLockedExceptionTimes &lt; (tryTimes - 1)) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        try {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            Thread.sleep(100);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        } catch (InterruptedException e1) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    sqliteLockedExceptionTimes++；</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">}</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p><strong>总的来说通过连接池与 WAL 模式，我们可以很大程度上增加 SQLite 的读写并发，大大减少由于并发导致的等待耗时，建议大家在应用中可以尝试开启。</strong></p><p><strong>3. 查询优化</strong></p><p>说到数据库的查询优化，你第一个想到的肯定是建索引，那我就先来讲讲 SQLite 的索引优化。</p><p><strong>索引优化</strong></p><p>正确使用索引在大部分的场景可以大大降低查询速度，微信的数据库优化也是通过索引开始。下面是索引使用非常简单的一个例子，我们先从索引表找到数据对应的 rowid，然后再从原数据表直接通过 rowid 查询结果。</p><p><img src="https://static001.geekbang.org/resource/image/57/d9/57fd28e1464b7ffbb1ba2b5379b84ad9.gif" src="data:image/gif;base64,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" alt=""></p><p>关于 SQLite 索引的原理网上有很多文章，在这里我推荐一些参考资料给你：</p><ul>
<li>
<p><a href="https://www.cnblogs.com/huahuahu/p/sqlite-suo-yin-de-yuan-li-ji-ying-yong.html">SQLite 索引的原理</a></p>
</li>
<li>
<p>官方文档：<a href="https://www.sqlite.org/queryplanner.html#searching">Query Planning</a></p>
</li>
<li>
<p><a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html">MySQL 索引背后的数据结构及算法原理</a></p>
</li>
</ul><p>这里的关键在于如何正确的建立索引，很多时候我们以为已经建立了索引，但事实上并没有真正生效。例如使用了 BETWEEN、LIKE、OR 这些操作符、使用表达式或者 case when 等。更详细的规则可参考官方文档<a href="http://www.sqlite.org/optoverview.html">The SQLite Query Optimizer Overview</a>，下面是一个通过优化转换达到使用索引目的的例子。</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">BETWEEN：myfiedl 索引无法生效</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">SELECT * FROM mytable WHERE myfield BETWEEN 10 and 20;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">转换成：myfiedl 索引可以生效</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">SELECT * FROM mytable WHERE myfield &gt;= 10 AND myfield &lt;= 20;</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p>建立索引是有代价的，需要一直维护索引表的更新。比如对于一个很小的表来说就没必要建索引；如果一个表经常是执行插入更新操作，那么也需要节制的建立索引。总的来说有几个原则：</p><ul>
<li>
<p>建立正确的索引。这里不仅需要确保索引在查询中真正生效，我们还希望可以选择最高效的索引。如果一个表建立太多的索引，那么在查询的时候 SQLite 可能不会选择最好的来执行。</p>
</li>
<li>
<p>单列索引、多列索引与复合索引的选择。索引要综合数据表中不同的查询与排序语句一起考虑，如果查询结果集过大，还是希望可以通过复合索引直接在索引表返回查询结果。</p>
</li>
<li>
<p>索引字段的选择。整型类型索引效率会远高于字符串索引，而对于主键 SQLite 会默认帮我们建立索引，所以主键尽量不要用复杂字段。</p>
</li>
</ul><p><strong>总的来说索引优化是 SQLite 优化中最简单同时也是最有效的，但是它并不是简单的建一个索引就可以了，有的时候我们需要进一步调整查询语句甚至是表的结构，这样才能达到最好的效果。</strong></p><p><strong>页大小与缓存大小</strong></p><p>在 I/O 文件系统中，我讲过数据库就像一个小文件系统一样，事实上它内部也有页和缓存的概念。</p><p>对于 SQLite 的 DB 文件来说，页（page）是最小的存储单位，如下图所示每个表对应的数据在整个 DB 文件中都是通过一个一个的页存储，属于同一个表不同的页以 B 树（B-tree）的方式组织索引，每一个表都是一棵 B 树。</p><p><img src="https://static001.geekbang.org/resource/image/c9/f3/c9b494da11233c98f2a54abfe2921ef3.png"  alt=""></p><p>跟文件系统的页缓存（Page Cache）一样，SQLite 会将读过的页缓存起来，用来加快下一次读取速度。页大小默认是 1024Byte，缓存大小默认是 1000 页。更多的编译参数你可以查看官方文档<a href="https://sqlite.org/pragma.html#pragma_journal_mode">PRAGMA Statements</a>。</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">PRAGMA page_size = 1024</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">PRAGMA cache_size = 1000</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p>每个页永远只存放一个表或者一组索引的数据，即不可能同一个页存放多个表或索引的数据，表在整个 DB 文件的第一个页就是这棵 B 树的根页。继续以上图为例，如果想查询 rowID 为 N+2 的数据，我们首先要从 sqlite_master 查找出 table 的 root page 的位置，然后读取 root page、page4 这两个页，所以一共会需要 3 次 I/O。</p><p><img src="https://static001.geekbang.org/resource/image/f2/1c/f232cbaff34236a1933182a02c685a1c.png"  alt=""></p><p>从上表可以看到，增大 page size 并不能不断地提升性能，在拐点以后可能还会有副作用。我们可以通过 PRAGMA 改变默认 page size 的大小，也可以再创建 DB 文件的时候进行设置。但是需要注意如果存在老的数据，需要调用 vacuum 对数据表对应的节点重新计算分配大小。</p><p>在微信的内部测试中，如果使用 4KB 的 page size 性能提升可以在 5%～10%。但是考虑到历史数据的迁移成本，最终还是使用 1024Byte。<strong>所以这里建议大家在新建数据库的时候，就提前选择 4KB 作为默认的 page size 以获得更好的性能。</strong></p><p><strong>其他优化</strong></p><p>关于 SQLite 的使用优化还有很多很多，下面我简单提几个点。</p><ul>
<li>
<p>慎用“<code>select*</code>”，需要使用多少列，就选取多少列。</p>
</li>
<li>
<p>正确地使用事务。</p>
</li>
<li>
<p>预编译与参数绑定，缓存被编译后的 SQL 语句。</p>
</li>
<li>
<p>对于 blob 或超大的 Text 列，可能会超出一个页的大小，导致出现超大页。建议将这些列单独拆表，或者放到表字段的后面。</p>
</li>
<li>
<p>定期整理或者清理无用或可删除的数据，例如朋友圈数据库会删除比较久远的数据，如果用户访问到这部分数据，重新从网络拉取即可。</p>
</li>
</ul><p>在日常的开发中，我们都应该对这些知识有所了解，再来复习一下上面学到的 SQLite 优化方法。<strong>通过引进 ORM，可以大大的提升我们的开发效率。通过 WAL 模式和连接池，可以提高 SQLite 的并发性能。通过正确的建立索引，可以提升 SQLite 的查询速度。通过调整默认的页大小和缓存大小，可以提升 SQLite 的整体性能。</strong></p><h2>SQLite 的其他特性</h2><p>除了 SQLite 的优化经验，我在微信的工作中还积累了很多使用的经验，下面我挑选了几个比较重要的经验把它分享给你。</p><p><strong>1. 损坏与恢复</strong></p><p>微信中 SQLite 的损耗率在 1/20000～1/10000 左右，虽然看起来很低，不过意考虑到微信的体量，这个问题还是不容忽视的。特别是如果某些大佬的聊天记录丢失，我们团队都会承受超大的压力。</p><p>创新是为了解决焦虑，技术都是逼出来的。对于 SQLite 损坏与恢复的研究，可以说是微信投入比较大的一块。关于 SQLite 数据库的损耗与修复，以及微信在这里的优化成果，你可以参考下面这些资料。</p><ul>
<li>
<p><a href="https://sqlite.org/howtocorrupt.html">How To Corrupt An SQLite Database File</a></p>
</li>
<li>
<p><a href="https://mp.weixin.qq.com/s/N1tuHTyg3xVfbaSd4du-tw">微信 SQLite 数据库修复实践</a></p>
</li>
<li>
<p><a href="https://mp.weixin.qq.com/s/Ln7kNOn3zx589ACmn5ESQA">微信移动端数据库组件 WCDB 系列（二） — 数据库修复三板斧</a></p>
</li>
<li>
<p><a href="https://github.com/Tencent/wcdb/wiki/Android%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%AE%E5%A4%8D">WCDB Android 数据库修复</a></p>
</li>
</ul><p><strong>2. 加密与安全</strong></p><p>数据库的安全主要有两个方面，一个是防注入，一个是加密。防注入可以通过静态安全扫描的方式，而加密一般会使用 SQLCipher 支持。</p><p>SQLite 的加解密都是以页为单位，默认会使用 AES 算法加密，加 / 解密的耗时跟选用的密钥长度有关。下面是<a href="https://github.com/Tencent/wcdb/wiki/Android-Benchmark">WCDB Android Benchmark</a>的数据，详细的信息请查看链接里的说明，从结论来说对 Create 来说影响会高达到 10 倍。</p><p><img src="https://static001.geekbang.org/resource/image/5f/81/5f5ac545e346a45f1c3fcfa504300b81.png"  alt=""></p><p>关于 WCDB 加解密的使用，你可以参考<a href="https://mp.weixin.qq.com/s/NFnYEXSxAaHBqpi7WofSPQ">《微信移动数据库组件 WCDB（四） — Android 特性篇》</a>。</p><p><strong>3. 全文搜索</strong></p><p>微信的全文搜索也是一个技术导向的项目，最开始的时候性能并不是很理想，经常会被人“批斗”。经过几个版本的优化迭代，目前看效果还是非常不错的。</p><p><img src="https://static001.geekbang.org/resource/image/d2/d9/d2a09d040d0d915e78d7598457d6d1d9.png"  alt=""></p><p>关于全文搜索，你可以参考这些资料：</p><ul>
<li>
<p><a href="https://sqlite.org/fts3.html">SQLite FTS3 and FTS4 Extensions</a></p>
</li>
<li>
<p><a href="https://mp.weixin.qq.com/s/AhYECT3HVyn1ikB0YQ-UVg">微信全文搜索优化之路</a></p>
</li>
<li>
<p><a href="https://mp.weixin.qq.com/s/GCznwCtjJ2XUszyMcbNz8Q">移动客户端多音字搜索</a></p>
</li>
</ul><p><strong>关于 SQLite 的这些特性，我们需要根据自己的项目情况综合考虑。假如某个数据库存储的数据并不重要，这个时候万分之一的数据损坏率我们并不会关心。同样是否需要使用数据库加密，也要根据存储的数据是不是敏感内容。</strong></p><h2>SQLite 的监控</h2><p>首先我想说，正确使用索引，正确使用事务。对于大型项目来说，参与的开发人员可能有几十几百人，开发人员水平参差不齐，很难保证每个人都可以正确而高效地使用 SQLite，所以这次时候需要建立完善的监控体系。</p><p><strong>1. 本地测试</strong></p><p>作为一名靠谱的开发工程师，我们每写一个 SQL 语句，都应该先在本地测试。我们可以通过 EXPLAIN QUERY PLAN 测试 SQL 语句的查询计划，是全表扫描还是使用了索引，以及具体使用了哪个索引等。</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">sqlite&gt; EXPLAIN QUERY PLAN SELECT * FROM t1 WHERE a=1 AND b&gt;2;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">QUERY PLAN</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">|--SEARCH TABLE t1 USING INDEX i2 (a=? AND b&gt;?)</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p>关于 SQLite 命令行与 EXPLAIN QUERY PLAN 的使用，可以参考<a href="https://sqlite.org/cli.html">Command Line Shell For SQLite</a>以及<a href="https://sqlite.org/eqp.html">EXPLAIN QUERY PLAN</a>。</p><p><strong>2. 耗时监控</strong></p><p>本地测试过于依赖开发人员的自觉性，所以很多时候我们依然需要建立线上大数据的监控。因为微信集成了自己的 SQLite 源码，所以可以非常方便地增加自己想要的监控模块。</p><p>WCDB 增加了<a href="https://tencent.github.io/wcdb/references/android/reference/com/tencent/wcdb/database/SQLiteTrace.html">SQLiteTrace</a>的监控模块，有以下三个接口：</p><p><img src="https://static001.geekbang.org/resource/image/f3/8a/f3f0b4b43e4911dc0655694fca90358a.png"  alt=""></p><p>我们可以通过这些接口监控数据库 busy、损耗以及执行耗时。针对耗时比较长的 SQL 语句，需要进一步检查是 SQL 语句写得不好，还是需要建立索引。</p><p><img src="https://static001.geekbang.org/resource/image/12/5d/12c3d1b494fc4fb60fa0a429a8ff805d.png"  alt=""></p><p><strong>3. 智能监控</strong></p><p>对于查询结果的监控只是我们监控演进的第二阶段，在这个阶段我们依然需要人工介入分析，而且需要比较有经验的人员负责。</p><p>我们希望 SQL 语句的分析可以做到智能化，是完全不需要门槛的。微信开源的 Matrix 里面就有一个智能化分析 SQLite 语句的工具：<a href="https://mp.weixin.qq.com/s/laUgOmAcMiZIOfM2sWrQgw">Matrix SQLiteLint – SQLite 使用质量检测</a>。<strong>它根据分析 SQL 语句的语法树，结合我们日常数据库使用的经验，抽象出索引使用不当、<code>select*</code>等六大问题。</strong></p><p><img src="https://static001.geekbang.org/resource/image/a4/81/a40411af3c91c9d58cac27f4f53aaa81.png"  alt=""></p><p>可能有同学会感叹为什么微信的人可以想到这样的方式，事实上这个思路在 MySQL 中是非常常见的做法。美团也开源了它们内部的 SQL 优化工具 SQLAdvisor，你可以参考这些资料：</p><ul>
<li>
<p><a href="https://tech.meituan.com/SQL_parser_used_in_mtdp.html">SQL 解析在美团的应用</a></p>
</li>
<li>
<p><a href="https://tech.meituan.com/sqladvisor_pr.html">美团点评 SQL 优化工具 SQLAdvisor 开源</a></p>
</li>
</ul><h2>总结</h2><p>数据库存储是一个开发人员的基本功，清楚 SQLite 的底层机制对我们的工作会有很大的指导意义。</p><p>掌握了 SQLite 数据库并发的机制，在某些时候我们可以更好地决策应该拆数据表还是拆数据库。新建一个数据库好处是可以隔离其他库并发或者损坏的情况，而坏处是数据库初始化耗时以及更多内存的占用。一般来说，单独的业务都会使用独立数据库，例如专门的下载数据库、朋友圈数据库、聊天数据库。但是数据库也不宜太多，我们可以有一个公共数据库，用来存放一些相对不是太大的数据。</p><p>在了解 SQLite 数据库损坏的原理和概率以后，我们可以根据数据的重要程度决定是否要引入恢复机制。我还讲了如何实现数据库加密以及对性能的影响，我们可以根据数据的敏感程度决定是否要引入加密。</p><p>最后我再强调一下，SQLite 优化真的是一个很大的话题，在课后你还需要结合参考资料再进一步反复学习，才能把今天的内容理解透彻。</p><h2>课后作业</h2><p>在你的应用中是否使用数据库存储呢，使用了哪种数据库？是否使用 ORM？在使用数据库过程中你有哪些疑问或者经验呢？欢迎留言跟我和其他同学一起讨论。</p><p>如果你的应用也在使用 SQLite 存储，今天的课后练习是尝试接入 WCDB，对比测试系统默认 SQLite 的性能。尝试接入<a href="https://github.com/Tencent/matrix/tree/master/matrix/matrix-android/matrix-sqlite-lint">Matrix SQLiteLint</a>，查看是否存在不合理的 SQLite 使用。</p><p>除了今天文章中的参考资料，我还给希望进阶的同学准备了下面的资料，欢迎有兴趣的同学继续深入学习。</p><ul>
<li>
<p><a href="https://sqlite.org/docs.html">SQLite 官方文档</a></p>
</li>
<li>
<p><a href="http://huili.github.io/sqlite/sqliteintro.html">SQLite 源码分析</a></p>
</li>
<li>
<p><a href="https://github.com/AndroidAdvanceWithGeektime/Chapter14/blob/master/%E5%85%A8%E9%9D%A2%E8%A7%A3%E6%9E%90SQLite.pdf">全面解析 SQLite</a></p>
</li>
<li>
<p>图书《SQLite 权威指南（第 2 版）》</p>
</li>
</ul><p>欢迎你点击“请朋友读”，把今天的内容分享给好友，邀请他一起学习。最后别忘了在评论区提交今天的作业，我也为认真完成作业的同学准备了丰厚的“学习加油礼包”，期待与你一起切磋进步哦。</p><p><img src="https://static001.geekbang.org/resource/image/bf/f1/bf8fdc35ddccb10b1161d8ca7eb8f8f1.jpg"  alt=""></p></div></div> <!----> <div class="_22WJb59B_0">
        </div></div> <div class="_2DmyW7ex_0 _2QmGFWqF_0"><div class="_1M5b-cvc_0"><div class="_3l55W_ak_0">上一篇</div> <div class="_3Ov-zF0e_0">专栏学得苦？可能是方法没找对</div></div> <div class="_1M5b-cvc_0"><div class="_3l55W_ak_0">下一篇</div> <div class="_3Ov-zF0e_0">15 | 网络优化（上）：移动开发工程师必备的网络优化知识</div></div></div> <div class="_1qhD3bdE_0 _2QmGFWqF_0"><div class="iconfont _2-nZIZjB_0"> 写留言</div> <h2><span>精选留言</span><span class="_2FC_cD1O_0">(5)</span></h2> <ul><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/14/49/7c/51088797.jpg"  class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>gufan</span> <!----></div> <div class="_1H1Z49Dr_0">2019-01-15</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class="">7</span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">这篇文章需要很长一段时间才能消化</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/12/e7/89/207cc841.jpg"  class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>HI</span> <!----></div> <div class="_1H1Z49Dr_0">2019-03-11</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class="">1</span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">大致的看了Matrix SQLiteLint的源码实现，由于Androd N hook sqlite3_profile 会出现问题，SQLiteLint 并不能实时的获取到sql语句，而是采用java层主动的告知SQLiteLint 要分析的sql，比如分析 select *，PrepareStatement， 而对于检测 Autoincrement，冗余索引，Without RowId 而是通过native层告知java层要查询的内容，java层将查询之后的内容再通知native层，这个检测的时间间隔为4秒，这4秒是有什么依据的吗</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <div class="_2xNIY4NG_0"><p class="_33BLbmw4_0">作者回复: 这些都是一些拍脑袋的经验值而已，也可以在GitHub上面提issue</p></div></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/14/4f/23/db8403c7.jpg"  class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>L</span> <!----></div> <div class="_1H1Z49Dr_0">2019-02-17</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0 _3D2NkqD6_0">sqlite wal mode w模式sync mode 可以直接修改成OFF？若不行，怎么论证？谢谢！因为修改成OFF可以减少 DB fdatasync call</div> <!----> <div class="_2xNIY4NG_0"><p class="_33BLbmw4_0">作者回复: 可以看看：https://www.sqlite.org/pragma.html#pragma_journal_mode<br><br>PRAGMA schema.synchronous; <br>PRAGMA schema.synchronous = 0 | OFF | 1 | NORMAL | 2 | FULL | 3 | EXTRA;<br><br>Query or change the setting of the "synchronous" flag. The first (query) form will return the synchronous setting as an integer. The second form changes the synchronous setting. The meanings of the various synchronous settings are as follows:<br><br>EXTRA (3)<br>EXTRA synchronous is like FULL with the addition that the directory containing a rollback journal is synced after that journal is unlinked to commit a transaction in DELETE mode. EXTRA provides additional durability if the commit is followed closely by a power loss.<br>FULL (2)<br>When synchronous is FULL (2), the SQLite database engine will use the xSync method of the VFS to ensure that all content is safely written to the disk surface prior to continuing. This ensures that an operating system crash or power failure will not corrupt the database. FULL synchronous is very safe, but it is also slower. FULL is the most commonly used synchronous setting when not in WAL mode.<br>NORMAL (1)<br>When synchronous is NORMAL (1), the SQLite database engine will still sync at the most critical moments, but less often than in FULL mode. There is a very small (though non-zero) chance that a power failure at just the wrong time could corrupt the database in journal_mode=DELETE on an older filesystem. WAL mode is safe from corruption with synchronous=NORMAL, and probably DELETE mode is safe too on modern filesystems. WAL mode is always consistent with synchronous=NORMAL, but WAL mode does lose durability. A transaction committed in WAL mode with synchronous=NORMAL might roll back following a power loss or system crash. Transactions are durable across application crashes regardless of the synchronous setting or journal mode. The synchronous=NORMAL setting is a good choice for most applications running in WAL mode.<br>OFF (0)<br>With synchronous OFF (0), SQLite continues without syncing as s</p></div></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/12/14/66/96f8d2b1.jpg"  class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>黄小木</span> <!----></div> <div class="_1H1Z49Dr_0">2019-02-15</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0 _3D2NkqD6_0">张老师好，提个问题，我们项目当前用的是ormlite关系型数据库框架，已经利用里面的api写了大量sql语句，请问如何最低成本的替换成wcdb呢？</div> <!----> <div class="_2xNIY4NG_0"><p class="_33BLbmw4_0">作者回复: ormlite应该是ORM框架，跟底层的wcdb应该是不冲突的。</p></div></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/14/46/9d/79edce49.jpg"  class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>嘿，抬头</span> <!----></div> <div class="_1H1Z49Dr_0">2019-01-15</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">张老师，请教个问题：<br>启动一个Activity,可以查出数据库中数据，但切换下系统语言，Activity重启，却查不出数据库中的数据！！！（debug看到两次都执行了查询数据库的代码）<br>希望您指点一二，谢谢~</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <div class="_2xNIY4NG_0"><p class="_33BLbmw4_0">作者回复: 输入信息太少，如果是必现可以比较好搞，这个可以直接通过sql命令行查询一下</p></div></div></li></ul></div></div> <!----></div> <!----></div></div> </div><!----></body></html>